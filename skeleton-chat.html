<!--
@license
Copyright (c) 2018 FabricElements. All rights reserved.

@group Skeleton Chat
@demo demo/index.html
-->
<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="./chat-mixin/chat-mixin.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../app-route/app-location.html">
<link rel="import" href="../app-route/app-route.html">
<link rel="import" href="./skeleton-chat-groups/skeleton-chat-groups.html">
<link rel="import" href="./skeleton-chat-box/skeleton-chat-box.html">

<dom-module id="skeleton-chat">
  <template>
    <style>
      :host {
        display: block;
        @apply --layout-fit;
        height: 100%;
        font-family: 'Roboto', 'Noto', sans-serif;
      }
    </style>
    <app-location route="{{route}}"></app-location>
    <app-route
      route="{{route}}"
      pattern="/chat"
      active="{{chatViewActive}}"
      tail="{{chatRouteTail}}"></app-route>
    <app-route
      route="{{chatRouteTail}}"
      pattern="/:id"
      active="{{chatBoxActive}}"
      data="{{subrouteData}}"></app-route>

    <template is="dom-if" if="[[chatViewActive]]">
      <template is="dom-if" if="[[!chatBoxActive]]">
        <skeleton-chat-groups></skeleton-chat-groups>
      </template>
      <template is="dom-if" if="[[chatBoxActive]]">
        <skeleton-chat-box group$="[[subrouteData.id]]"></skeleton-chat-box>
      </template>
    </template>

  </template>

  <script>
    /**
     * `skeleton-chat`
     *
     *
     * @customElement
     * @polymer
     * @appliesMixin Fabric.ChatMixin
     * @demo demo/index.html
     */
    class SkeletonChat extends Fabric.ChatMixin(Polymer.Element) {
      /**
       * @return {string}
       */
      static get is() {
        return 'skeleton-chat';
      }

      /**
       * @return {object}
       */
      static get properties() {
        return {
          /** Route */
          route: {
            type: Object,
          },
          /** Route data */
          routeData: {
            type: Object,
            value: {
              page: null,
            },
          },
          subrouteData: {
            type: Object,
            value: {
              id: null,
            },
          },
        };
      }
    }

    window.customElements.define(SkeletonChat.is, SkeletonChat);
  </script>
</dom-module>
